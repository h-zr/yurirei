<!DOCTYPE html>
<html>
<head>
<link rel="shortcut icon" href="http://static.tumblr.com/8rqtw6r/FdTo313i1/favicon.png">
<title>Kindred Spirits on the Roof Character Sorter</title>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">

<style type="text/css">
<!--
#mainTable{
font-size: 19px;
font-family: 'Josefin Slab', serif;
text-align: center;
vertical-align: middle;
margin-left: auto;
margin-right: auto;
border-collapse: separate;
border-spacing: 5px 5px;
}
#leftField{
width: 150px;
height: 246px;
border: 1px solid #000;
cursor: pointer;
}
#rightField{
width: 150px;
height: 246px;
border: 1px solid #000;
cursor: pointer;
}
.middleField{
width: 127px;
height: 127px;
border: 1px solid #000;
cursor: pointer;
}
a{
color: #5b17ba;
text-decoration : none;
}
a:hover{
color: #945ce3;
}
body {
width: 460px;
height: 100%;
margin: 0 auto;
font-family: 'Josefin Slab', erif;
}
html {
min-height: 100%;
background:
url(http://static.tumblr.com/8rqtw6r/LOuo313p5/bkg-front.png),
url(http://static.tumblr.com/8rqtw6r/ZK9o313p0/bkg-back.jpg);
background-position: bottom, center;
background-size: 100%, cover;
background-repeat: no-repeat, no-repeat; 
}
-->
</style>

<script type="text/javascript">

<!--

// Insert characters below!!

var namMember = new Array(
"Ariu Aki<br><img src=https://40.media.tumblr.com/90febd11189f2a896e49c8896937d15f/tumblr_inline_o30z71eiZd1r8b7bs_540.png>",
"Ano Fuji<br><img src=https://56.media.tumblr.com/749af0306fa41ef64f4b5e860cea3955/tumblr_inline_o30z71FP1h1r8b7bs_540.png>",
"Komano Hina<br><img src=https://41.media.tumblr.com/f86c28697eb81c9b3a71d98f3cdc613a/tumblr_inline_o30z72k0A51r8b7bs_540.png>",
"Tsurugimine Kiri<br><img src=https://41.media.tumblr.com/726efaf564fa55d9fa45d036ab4d25c7/tumblr_inline_o30z73JEYC1r8b7bs_540.png>",
"Amishima Matsuri<br><img src=https://41.media.tumblr.com/2f446d3f1e9a278de20933cecb78265c/tumblr_inline_o30z733H0p1r8b7bs_540.png>",
"Nagatani Megumi<br><img src=https://40.media.tumblr.com/34abab1a9461955accd5c76678556ead/tumblr_inline_o30z73j1Dy1r8b7bs_540.png>",
"Aihara Miki<br><img src=https://41.media.tumblr.com/f8e48513c3003b52b16ed58dab73fb69/tumblr_inline_o30z74ZRnO1r8b7bs_540.png>",
"Inamoto Miyu<br><img src=https://40.media.tumblr.com/ae882e3c0613d87081c729bcd70b4a90/tumblr_inline_o30z74RNT11r8b7bs_540.png>",
"Miyama Nena<br><img src=https://36.media.tumblr.com/cc51617cbb29b7c2c2dfbe0e966356b7/tumblr_inline_o30z74rZVB1r8b7bs_540.png>",
"Enoki Sachi<br><img src=https://40.media.tumblr.com/ab5b6a2f353998410a5f9b545a626cb8/tumblr_inline_o30z75SfyA1r8b7bs_540.png>",
"Futano Sasa<br><img src=https://56.media.tumblr.com/5a0ee9e30224246e22eb92e73fcaee97/tumblr_inline_o30z75YnCC1r8b7bs_540.png>",
"Maki Seina<br><img src=https://41.media.tumblr.com/03ff5a0a8a53cb3154bcc7e8aad825e5/tumblr_inline_o30z75dwx71r8b7bs_540.png>",
"Sonou Tsukuyou<br><img src=https://56.media.tumblr.com/9c5facee280ae10fc57356250de50294/tumblr_inline_o30z76FInb1r8b7bs_540.png>",
"Ichiki Umi<br><img src=https://41.media.tumblr.com/5302721e56337def96563502e0449e55/tumblr_inline_o30z76gjfd1r8b7bs_540.png>",
"Koba Yuka<br><img src=https://40.media.tumblr.com/24a892d08eb945bab0dd7ae74d47a7d9/tumblr_inline_o30z76G0K61r8b7bs_540.png>",
"Toomi Yuna<br><img src=https://40.media.tumblr.com/d1bfbe97dc94173319f42be32561055b/tumblr_inline_o30z76pPqV1r8b7bs_540.png>"
);

// Insert characters above!!

//*********************************************************

var lstMember = new Array();
var parent = new Array();
var equal = new Array();
var rec = new Array();
var cmp1,cmp2;
var head1,head2;
var nrec;

var numQuestion;
var totalSize;
var finishSize;
var finishFlag;

//The initialization of the variable+++++++++++++++++++++++++++++++++++++++++++++
function initList(){
var n = 0;
var mid;
var i;

//The sequence that you should sort
lstMember[n] = new Array();
for (i=0; i<namMember.length; i++) {
lstMember[n][i] = i;
}
parent[n] = -1;
totalSize = 0;
n++;

for (i=0; i<lstMember.length; i++) {
//And element divides it in two/more than two
//Increase divided sequence of last in first member
if(lstMember[i].length>=2) {
mid = Math.ceil(lstMember[i].length/2);
lstMember[n] = new Array();
lstMember[n] = lstMember[i].slice(0,mid);
totalSize += lstMember[n].length;
parent[n] = i;
n++;
lstMember[n] = new Array();
lstMember[n] = lstMember[i].slice(mid,lstMember[i].length);
totalSize += lstMember[n].length;
parent[n] = i;
n++;
}
}

//Preserve this sequence
for (i=0; i<namMember.length; i++) {
rec[i] = 0;
}
nrec = 0;

//List that keeps your results
//Value of link initial
// Value of link initial
for (i=0; i<=namMember.length; i++) {
equal[i] = -1;
}

cmp1 = lstMember.length-2;
cmp2 = lstMember.length-1;
head1 = 0;
head2 = 0;
numQuestion = 1;
finishSize = 0;
finishFlag = 0;
}

//&#12522;&#12473;&#12488;&#12398;&#12477;&#12540;&#12488;+++++++++++++++++++++++++++++++++++++++++++
//flag&#65306;Don't know characters
// -1&#65306;Chose the left
// 0&#65306;Tie
// 1&#65306;Chose the right
function sortList(flag){
var i;
var str;

//rec preservation
if (flag<0) {
rec[nrec] = lstMember[cmp1][head1];
head1++;
nrec++;
finishSize++;
while (equal[rec[nrec-1]]!=-1) {
rec[nrec] = lstMember[cmp1][head1];
head1++;
nrec++;
finishSize++;
}
}
else if (flag>0) {
rec[nrec] = lstMember[cmp2][head2];
head2++;
nrec++;
finishSize++;
while (equal[rec[nrec-1]]!=-1) {
rec[nrec] = lstMember[cmp2][head2];
head2++;
nrec++;
finishSize++;
}
}
else {
rec[nrec] = lstMember[cmp1][head1];
head1++;
nrec++;
finishSize++;
while (equal[rec[nrec-1]]!=-1) {
rec[nrec] = lstMember[cmp1][head1];
head1++;
nrec++;
finishSize++;
}
equal[rec[nrec-1]] = lstMember[cmp2][head2];
rec[nrec] = lstMember[cmp2][head2];
head2++;
nrec++;
finishSize++;
while (equal[rec[nrec-1]]!=-1) {
rec[nrec] = lstMember[cmp2][head2];
head2++;
nrec++;
finishSize++;
}
}

//Processing after finishing with one list
if (head1<lstMember[cmp1].length && head2==lstMember[cmp2].length) {
//List the remainder of cmp2 copies, list cmp1 copies when finished scanning
while (head1<lstMember[cmp1].length){
rec[nrec] = lstMember[cmp1][head1];
head1++;
nrec++;
finishSize++;
}
}
else if (head1==lstMember[cmp1].length && head2<lstMember[cmp2].length) {
//List the remainder of cmp1 copies, list cmp2 copies when finished scanning
while (head2<lstMember[cmp2].length){
rec[nrec] = lstMember[cmp2][head2];
head2++;
nrec++;
finishSize++;
}
}

//When it arrives at the end of both lists
//Update a pro list
if (head1==lstMember[cmp1].length && head2==lstMember[cmp2].length) {
for (i=0; i<lstMember[cmp1].length+lstMember[cmp2].length; i++) {
lstMember[parent[cmp1]][i] = rec[i];
}
lstMember.pop();
lstMember.pop();
cmp1 = cmp1-2;
cmp2 = cmp2-2;
head1 = 0;
head2 = 0;

//Initialize the rec before performing the new comparison
if (head1==0 && head2==0) {
for (i=0; i<namMember.length; i++) {
rec[i] = 0;
}
nrec = 0;
}
}

if (cmp1<0) {
str = "Date #"+(numQuestion-1)+"<br>"+Math.floor(finishSize*100/totalSize)+"% sorted.";
document.getElementById("battleNumber").innerHTML = str;

showResult();
finishFlag = 1;
}
else {
showImage();
}
}

//The results+++++++++++++++++++++++++++++++++++++++++++++++
//&#38918;&#20301;=Rank/Grade/Position/Standing/Status
//&#21517;&#21069;=Identification term
function showResult() {
var ranking = 1;
var sameRank = 1;
var str = "";
var i;

str += "<table style=\"background:rgba(255,255,255,0.8); font-size:14px; line-height:120%; margin-left:auto; margin-right:auto; border:1px solid #000; border-collapse:collapse\" align=\"center\">";
str += "<tr><td style=\"color:#ffffff; background-color:#000; text-align:center;\">Rank<\/td><td style=\"color:#ffffff; background-color:#000; text-align:center;\">Character<\/td><\/tr>";

for (i=0; i<namMember.length; i++) {
var tmp;
if (ranking <= 3) {
	tmp = namMember[lstMember[0][i]];
}
else
	var nameEnd = namMember[lstMember[0][i]].indexOf('<');
	tmp = namMember[lstMember[0][i]].substr(0, nameEnd);
str += "<tr><td style=\"border:1px solid #000; text-align:center; padding-right:0px;\">"+ranking+"<\/td><td style=\"border:1px solid #000; padding-left:0px;\">"+tmp+"<\/td><\/tr>";
if (i<namMember.length-1) {
if (equal[lstMember[0][i]]==lstMember[0][i+1]) {
sameRank++;
} else {
ranking += sameRank;
sameRank = 1;
}
}
}
str += "<\/table>";

document.getElementById("resultField").innerHTML = str;
}

//Indicates two elements to compare+++++++++++++++++++++++++++++++++++
function showImage() {
var str0 = "Date #"+numQuestion+"<br>"+Math.floor(finishSize*100/totalSize)+"% sorted.";
var str1 = ""+toNameFace(lstMember[cmp1][head1]);
var str2 = ""+toNameFace(lstMember[cmp2][head2]);

document.getElementById("battleNumber").innerHTML = str0;
document.getElementById("leftField").innerHTML = "<small>"+str1+"</small>";
document.getElementById("rightField").innerHTML = "<small>"+str2+"</small>";

numQuestion++;
}

//Convert numeric value into a name (emoticon)+++++++++++++++++++++++++++++++
function toNameFace(n){
var str = namMember[n];

/*
str += '<br />';
switch(n) {
//case -1 Because it is a sample, delete it
case -1: str+=""; break;
}*/
return str;
}
//-->
</script>

<!-- Upper Text/Instructions -->
<p class="instructions">
<center><b>Welcome to the Kindred Spirits on the Roof Character Sorter!</b><br>
<small>Instructions: Don't be half-assed in love.<br>
Throw away your worries and let your heart decide.</small></center>
</p>

<!-- Main Table -->
<table id="mainTable" align="center">
<tbody><tr>
<td id="battleNumber" colspan="3" style="padding-bottom: 10px;" style="text-align:center;"><b>Date #1<br>0% sorted.</b></td>
</tr>
<tr>
<td id="leftField" onclick="if(finishFlag==0) sortList(-1);" rowspan="2" style="background:rgba(255,255,255,0.6); text-align:center;"></td>
<td class="middleField" onclick="if(finishFlag==0) sortList(0);" style="background:rgba(255,255,255,0.6); text-align:center;">
<small>I love both!</small>
</td>
<td id="rightField" onclick="if(finishFlag==0) sortList(1);" rowspan="2"style="background:rgba(255,255,255,0.6); text-align:center;"></td>
</tr>
<tr>
<td class="middleField" onclick="if(finishFlag==0) sortList(0);"style="background:rgba(255,255,255,0.6); text-align:center;">
<small>I can't choose!</small>
</td>
</tr>
</tbody></table>
<br>

<!-- Results Table -->
<div id="resultField" style="text-align: center;">
</div>
<br>
<script type="text/javascript">
<!--
initList();
showImage();
//-->


<!-- Lower Text -->
</script>
<center>
<table class="other" style="background:rgba(255,255,255,0.6); text-align: center;"><td>
<small>
made by <a href=http://twitter.com/ShionKamiya>hazr</a><br/>
code taken from <a href="http://mostlypoptarts.tumblr.com/">mostlypoptarts</a><br />
images from <a href=http://mangagamer.org/kindredspirits/>MangaGamer</a>
</small>
</td></table>
</center>

</body>
</html>
